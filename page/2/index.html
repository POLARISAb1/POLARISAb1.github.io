<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="我就是这条街最靓的仔">
<meta property="og:type" content="website">
<meta property="og:title" content="杨艺琳的博客">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="杨艺琳的博客">
<meta property="og:description" content="我就是这条街最靓的仔">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="杨艺琳">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>杨艺琳的博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">杨艺琳的博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">放弃不难<br>但坚持一定很酷</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/09/15-7-%E5%86%85%E7%BD%AE%E5%BA%93-%E7%A7%91%E5%AD%A6%E8%AE%A1%E7%AE%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="杨艺琳">
      <meta itemprop="description" content="我就是这条街最靓的仔">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨艺琳的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/09/15-7-%E5%86%85%E7%BD%AE%E5%BA%93-%E7%A7%91%E5%AD%A6%E8%AE%A1%E7%AE%97/" class="post-title-link" itemprop="url">15.7 内置库-科学计算</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-03-09 14:50:01" itemprop="dateCreated datePublished" datetime="2022-03-09T14:50:01+08:00">2022-03-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-03-10 10:15:34" itemprop="dateModified" datetime="2022-03-10T10:15:34+08:00">2022-03-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%B5%8B%E8%AF%95%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">测试学习</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="科学计算"><a href="#科学计算" class="headerlink" title="科学计算"></a>科学计算</h1><h2 id="1-math函数"><a href="#1-math函数" class="headerlink" title="1 math函数"></a>1 <code>math</code>函数</h2><p><code>math</code>函数，<code>python</code>提供的内置数学类函数库，包含了很多数学公式。<br>比如幂函数运算，三角函数，高等函数运算等。</p>
<h3 id="1-1-math函数操作"><a href="#1-1-math函数操作" class="headerlink" title="1.1 math函数操作"></a>1.1 <code>math</code>函数操作</h3><ul>
<li>数字常数</li>
<li>数论与表示函数</li>
<li>幂对数函数</li>
<li>三角对数函数</li>
<li>高等特殊函数</li>
</ul>
<h3 id="1-2-数字常量"><a href="#1-2-数字常量" class="headerlink" title="1.2 数字常量"></a>1.2 数字常量</h3><table>
<thead>
<tr>
<th>常数</th>
<th><code>数学表示</code></th>
<th><code>描述</code></th>
</tr>
</thead>
<tbody><tr>
<td><code>math.pi</code></td>
<td>∏</td>
<td>圆周率，值为3.1415925·········</td>
</tr>
<tr>
<td><code>math.e</code></td>
<td>e</td>
<td>自然对数，值为2.7182818········</td>
</tr>
<tr>
<td><code>math.inf</code></td>
<td>∞</td>
<td>正无穷大，负无穷<code>-math.inf</code></td>
</tr>
<tr>
<td><code>math.nan</code></td>
<td>NAN</td>
<td>非数字 <code>NAN</code>（Not a number）</td>
</tr>
</tbody></table>
<h3 id="1-3-数论与表示函数（了解）"><a href="#1-3-数论与表示函数（了解）" class="headerlink" title="1.3 数论与表示函数（了解）"></a>1.3 数论与表示函数（了解）</h3><table>
<thead>
<tr>
<th>函数</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody><tr>
<td><code>math.ceil(x)</code></td>
<td>返回 &gt;&#x3D; x 的最小整数 (int)</td>
<td>&gt;&gt;&gt; math.ceil(2.2) 3</td>
</tr>
<tr>
<td><code>math.floor(x)</code></td>
<td>返回 &lt;&#x3D; x 的最大整数 (int)</td>
<td>&gt;&gt;&gt; math.floor(3.6) 3</td>
</tr>
<tr>
<td><code>math.modf</code>(x)</td>
<td>返回 x 的小数部分和整数部分，两个结果都带有 x 的符号并且是浮点数。注意：Python 浮点数通常不超过 53 位的精度（与 C double 相同），任何 abs(x) &gt;&#x3D; 2**52 的浮点数 x 必然没有小数位。</td>
<td>&gt;&gt;&gt; math.modf(3.4) (0.3999999999999999, 3.0) &gt;&gt;&gt;math.modf(2**52+0.55) (0.0, 4503599627370497.0)</td>
</tr>
<tr>
<td><code>math.comb</code>(n, k)</td>
<td>返回从 n 个项目中选出 k 个项目的方法数，不重复且无顺序，也称为二项式系数。当 k &lt;&#x3D; n 时，n! &#x2F; (k! * (n - k)!)当 k &gt; n 时，为 0</td>
<td>&gt;&gt;&gt; math.comb(3, 2) 3 &gt;&gt;&gt; math.comb(2, 3) 0</td>
</tr>
<tr>
<td><code>math.perm(n,k=None)</code></td>
<td>返回从 n 个项目中选择 k 个项目的方法数，不重复且有顺序。当 k &lt;&#x3D; n 时，n! &#x2F; (n - k)!当 k &gt; n 时，为 0当 k &#x3D; None 时，k 默认为 n ，函数返回 n！</td>
<td>&gt;&gt;&gt; math.perm(3, 2) 6 &gt;&gt;&gt; math.perm(2, 3) 0</td>
</tr>
<tr>
<td><code>math.copysign(x, y)</code></td>
<td>返回一个大小为 x 的绝对值，符号同 y 的浮点数</td>
<td>&gt;&gt;&gt; math.copysign(1.2, -3) -1.2 &gt;&gt;&gt; math.copysign(-1, 3) 1.0</td>
</tr>
<tr>
<td><code>math.fabs(x)</code></td>
<td>返回 x 的绝对值</td>
<td>&gt;&gt;&gt; math.fabs(-2) 2.0</td>
</tr>
<tr>
<td><code>math.factorial(x)</code></td>
<td>返回 x 的阶乘 (int)</td>
<td>&gt;&gt;&gt; math.factorial(4) 24</td>
</tr>
<tr>
<td><code>math.fmod(x, y)</code></td>
<td>取余，与 x % y 可能会返回不同的结果math.fmod(x, y) 符号同 x，x % y 符号同 y在处理 float 时，通常首选函数 fmod()，而在处理 int 时，首选 x % y。</td>
<td>&gt;&gt;&gt; math.fmod(7, -2) 1.0 &gt;&gt;&gt; 7 % -2 -1</td>
</tr>
<tr>
<td><code>math.remainder(x, y)</code></td>
<td>取余（遵循 IEEE 754），若 x &#x2F; y 正好位于两个连续整数的中间，则商使用最近的偶数</td>
<td>&gt;&gt;&gt; math.remainder(5, 2) 1.0 &gt;&gt;&gt; math.remainder(7, 2) -1.0</td>
</tr>
<tr>
<td><code>math.frexp(x)</code></td>
<td>用以获得浮点数的内部表示，返回 x 的尾数和指数 (m, e)，m 为 float，e 为 int，x &#x3D;&#x3D; m * 2**e。若 x 为 0，则返回 (0.0, 0)，否则 0.5 &lt;&#x3D; abs(m) &lt; 1</td>
<td>&gt;&gt;&gt; math.frexp(3.4) (0.85, 2)</td>
</tr>
<tr>
<td><code>math.ldexp(x, i)</code></td>
<td>返回 x * (2**i)，本质上是函数 frexp() 的反函数</td>
<td>&gt;&gt;&gt; math.ldexp(0.85, 2) 3.4</td>
</tr>
<tr>
<td><code>math.fsum(iterable)</code></td>
<td>返回可迭代对象中值的准确浮点总和，通过跟踪多个中间部分的总和来避免精度损失</td>
<td>&gt;&gt;&gt; sum([.1]*10) 0.9999999999999999 &gt;&gt;&gt; math.fsum([.1]*10) 1.0</td>
</tr>
<tr>
<td><code>math.gcd(*integers)</code></td>
<td>GCD: Greatest Common Divisor 返回所有参数 (int) 的最大公约数</td>
<td>&gt;&gt;&gt;math.gcd(4, 6, 8) 2</td>
</tr>
<tr>
<td><code>math.lcm(*integers)</code></td>
<td>LCM: Least Common Multiple 返回所有参数 (int) 的最小公倍数</td>
<td>&gt;&gt;&gt;math.lcm(3, 5) 15</td>
</tr>
<tr>
<td><code>math.isclose(a,b,*,rel_tol=1e09,abs_tol=0.0)</code></td>
<td>根据给定的 rel_tol 和 abs_tol 确定 a, b 是否接近，rel_tol 是相对容差，abs_tol 是最小绝对容差。若 abs(a-b) &lt;&#x3D; max(rel_tol * max(abs(a), abs(b)), abs_tol)，返回 True</td>
<td>&gt;&gt;&gt; math.isclose(3.4, 3.4) True</td>
</tr>
<tr>
<td><code>math.isfinite(x)</code></td>
<td>若 x 既不是无穷大也不是 NaN，则返回 True，否则返回 False</td>
<td>&gt;&gt;&gt; math.isfinite(3.4) True</td>
</tr>
<tr>
<td><code>math.isinf(x)</code></td>
<td>若 x 是正无穷大或负无穷大，则返回 True，否则返回 False。</td>
<td>&gt;&gt;&gt; math.isinf(float(‘inf’)) True</td>
</tr>
<tr>
<td><code>math.isnan(x)</code></td>
<td>若 x 是 NaN（非数），则返回 True，否则返回 False。</td>
<td>&gt;&gt;&gt; math.isnan(float(‘nan’)) True</td>
</tr>
<tr>
<td><code>math.isqrt(n)</code></td>
<td>ISqRt: Integer Square Root返回非负整数 n 的整数平方根 a ，使得 a²≤n</td>
<td>&gt;&gt;&gt; math.isqrt(5) 2</td>
</tr>
<tr>
<td><code>math.nextafter(x, y)</code></td>
<td>返回 x 之后朝向 y 的下一个浮点值</td>
<td>&gt;&gt;&gt; math.nextafter(3, math.inf) 3.0000000000000004 &gt;&gt;&gt; math.nextafter(3, 0.0) 2.9999999999999996</td>
</tr>
<tr>
<td><code>math.ulp(x)</code></td>
<td>ULP: Unit in the Last Place返回浮点数 x 的最低有效位的值,这样第一个大于 x 的浮点数是 x + ulp(x)。</td>
<td>&gt;&gt;&gt; math.ulp(3.4) 4.440892098500626e-16</td>
</tr>
<tr>
<td><code>math.prod(iterable, *, start=1)</code></td>
<td>prod : product 返回 start 与 iterable 中各元素的乘积，若 iterable为空，则返回start</td>
<td>&gt;&gt;&gt; math.prod((2, 3)) 6 &gt;&gt;&gt; math.prod((2, 3), start&#x3D;2) 12</td>
</tr>
<tr>
<td><code>math.trunc(x)</code></td>
<td>trunc : truncate 将实数 x 截断为int (通常为 int)</td>
<td>&gt;&gt;&gt; math.trunc(3.4) 3</td>
</tr>
</tbody></table>
<h3 id="1-4-幂函数和对数函数（了解）"><a href="#1-4-幂函数和对数函数（了解）" class="headerlink" title="1.4 幂函数和对数函数（了解）"></a>1.4 幂函数和对数函数（了解）</h3><table>
<thead>
<tr>
<th>函数</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody><tr>
<td><code>math.exp(x)</code></td>
<td>返回 e 的 x 次幂，其中 e &#x3D; 2.718281……是自然对数的底。这通常比 math.e ** x 或 pow(math.e, x) 更准确</td>
<td>&gt;&gt;&gt; math.exp(2) 7.38905609893065</td>
</tr>
<tr>
<td><code>math.expm1(x)</code></td>
<td>expm1: exp, minus 1 返回 e 的 x 次幂，减去 1。对于小浮点数 x，exp(x) - 1 会导致精度的显着损失；exp.m1() 函数提供了一种方法来计算到全精度</td>
<td>&gt;&gt;&gt; math.exp(1e-5) - 1 1.0000050000069649e-05 &gt;&gt;&gt; math.expm1(1e-5) 1.0000050000166667e-05</td>
</tr>
<tr>
<td><code>math.log(x[,base])</code></td>
<td>返回以base为底，x 的对数，计算为 log(x)&#x2F;log(base)。若未指定base，默认为e</td>
<td>&gt;&gt;&gt; math.log(2) 0.6931471805599453 &gt;&gt;&gt; math.log(2, 2) 1.0</td>
</tr>
<tr>
<td><code>math.log1p(x)</code></td>
<td>返回 1+x（以 e 为底）的自然对数。结果的计算方式对于接近零的 x 是准确的</td>
<td>&gt;&gt;&gt; math.log1p(2) 1.0986122886681098</td>
</tr>
<tr>
<td><code>math.log2(x)</code></td>
<td>返回 x 的以 2 为底的对数。这通常比 log(x, 2) 更准确</td>
<td>&gt;&gt;&gt; math.log2(2) 1.0</td>
</tr>
<tr>
<td><code>math.log10(x)</code></td>
<td>返回 x 的以 10 为底的对数。这通常比 log(x, 10) 更准确</td>
<td>&gt;&gt;&gt; math.log10(100) 2.0</td>
</tr>
<tr>
<td><code>math.pow(x, y)</code></td>
<td>返回 x 的 y 次幂。与内置的 ** 运算符不同，math.pow() 将其两个参数都转换为 float 类型。使用 ** 或内置的 pow() 函数计算精确的整数幂。</td>
<td>&gt;&gt;&gt; math.pow(2, 3) 8.0 &gt;&gt;&gt; pow(2, 3) 8</td>
</tr>
<tr>
<td><code>math.sqrt((x)</code></td>
<td>返回 x 的平方根 (square root)</td>
<td>&gt;&gt;&gt; math.sqrt(4) 2.0</td>
</tr>
</tbody></table>
<h3 id="1-5-三角函数（了解）"><a href="#1-5-三角函数（了解）" class="headerlink" title="1.5 三角函数（了解）"></a>1.5 三角函数（了解）</h3><table>
<thead>
<tr>
<th>函数</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody><tr>
<td><code>math.sin(x)</code></td>
<td>sin : sine 返回 x 弧度的正弦值</td>
<td>&gt;&gt;&gt; math.sin(math.pi&#x2F;2) 1.0</td>
</tr>
<tr>
<td><code>math.asin(x)</code></td>
<td>asin : arc sine 返回 x 的反正弦，单位：弧度。结果在 -pi&#x2F;2 和 pi&#x2F;2 之间</td>
<td>&gt;&gt;&gt; math.asin(1) 1.5707963267948966</td>
</tr>
<tr>
<td><code>math.cos(x)</code></td>
<td>cos : cosine 返回 x 弧度的余弦值</td>
<td>&gt;&gt;&gt; math.cos(math.pi) -1.0</td>
</tr>
<tr>
<td><code>math.acos(x)</code></td>
<td>acos : arc cosine 返回 x 的反余弦值，单位：弧度。结果在 0 和 pi 之间</td>
<td>&gt;&gt;&gt; math.acos(-1) 3.141592653589793</td>
</tr>
<tr>
<td><code>math.tan(x)</code></td>
<td>tan : tangent 返回 x 弧度的切线</td>
<td>&gt;&gt;&gt; math.tan(math.pi&#x2F;4) 0.9999999999999999</td>
</tr>
<tr>
<td><code>math.atan(x)</code></td>
<td>atan : arc tangent 返回 x 的反正切，单位：弧度。结果介于 -pi&#x2F;2 和 pi&#x2F;2 之间。</td>
<td>&gt;&gt;&gt; math.atan(1) 0.7853981633974483</td>
</tr>
<tr>
<td><code>math.atan2(y, x)</code></td>
<td>返回平面中从原点到点 (x, y) 的向量与正 X 轴形成的角度 atan(y &#x2F; x)，单位：弧度。结果介于 -pi 和 pi 之间。</td>
<td>&gt;&gt;&gt; math.atan2(1, 1) 0.7853981633974483</td>
</tr>
<tr>
<td><code>math.dist(p, q)</code></td>
<td>dist : distance 返回两点 p 和 q 之间的欧几里得距离，每个点都作为坐标序列（或可迭代）给出。这两个点必须具有相同的维度。大致相当于：sqrt(sum((px - qx) ** 2.0 for px, qx in zip(p, q)))</td>
<td>&gt;&gt;&gt; math.dist((1, 1), (2, 2)) 1.4142135623730951</td>
</tr>
<tr>
<td><code>math.hypot(*coordinates)</code></td>
<td>hypot : hypotenuse （斜边） 返回欧几里得范数，sqrt(sum(x*<em>2 for x in coordinates))。这是从原点到坐标给定点的向量的长度。对于二维点 (x, y)，这等效于使用勾股定理 sqrt(x</em>x + y*y) 计算直角三角形的斜边。3.8 版之前仅支持二维，之后添加了对n维点的支持。</td>
<td>&gt;&gt;&gt; math.hypot(1, 1) 1.4142135623730951</td>
</tr>
</tbody></table>
<p>例子：1年365天，以第1天的能力值为基数，记为1.0，当努力学习时，能力值相比前一天提高1%，当没有学习时能力值相比前一天下降1%。那么每天努力和每天放任，一年下来的能力值相差多少呢？</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line">power_up = math.<span class="built_in">pow</span>(<span class="number">1.01</span>, <span class="number">365</span>)</span><br><span class="line"><span class="built_in">print</span>(power_up)</span><br><span class="line">power_down = math.<span class="built_in">pow</span>(<span class="number">0.99</span>, <span class="number">365</span>)</span><br><span class="line"><span class="built_in">print</span>(power_down)</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">37.78343433288728</span><br><span class="line">0.025517964452291125</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/09/15-9-%E5%86%85%E7%BD%AE%E5%BA%93-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8Fre/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="杨艺琳">
      <meta itemprop="description" content="我就是这条街最靓的仔">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨艺琳的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/09/15-9-%E5%86%85%E7%BD%AE%E5%BA%93-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8Fre/" class="post-title-link" itemprop="url">15.9 内置库-正则表达式re</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-03-09 13:39:45 / 修改时间：18:58:14" itemprop="dateCreated datePublished" datetime="2022-03-09T13:39:45+08:00">2022-03-09</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%B5%8B%E8%AF%95%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">测试学习</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="内置库re"><a href="#内置库re" class="headerlink" title="内置库re"></a>内置库re</h1><h2 id="1-正则表达式"><a href="#1-正则表达式" class="headerlink" title="1 正则表达式"></a>1 正则表达式</h2><h3 id="1-1什么是正则表达式？"><a href="#1-1什么是正则表达式？" class="headerlink" title="1.1什么是正则表达式？"></a>1.1什么是正则表达式？</h3><ul>
<li>正则表达式就是记录文本规则的代码</li>
<li>可以查找操作符合某些复杂规则的字符串</li>
</ul>
<h3 id="1-2-使用场景"><a href="#1-2-使用场景" class="headerlink" title="1.2 使用场景"></a>1.2 使用场景</h3><ul>
<li>处理字符串</li>
<li>处理日志</li>
</ul>
<h3 id="1-3-在python中使用正则表达式"><a href="#1-3-在python中使用正则表达式" class="headerlink" title="1.3 在python中使用正则表达式"></a>1.3 在python中使用正则表达式</h3><ul>
<li>把正则表达式作为模式字符串</li>
<li>正则表达式可以使用原生字符串来表示</li>
<li>原生字符串需要在字符串前方加上<code>r</code>（<code>r&#39;string&#39;</code>）</li>
</ul>
<h2 id="2-使用re模块实现正则表达式操作"><a href="#2-使用re模块实现正则表达式操作" class="headerlink" title="2 使用re模块实现正则表达式操作"></a>2 使用re模块实现正则表达式操作</h2><h3 id="2-1-正则表达式对象转换"><a href="#2-1-正则表达式对象转换" class="headerlink" title="2.1 正则表达式对象转换"></a>2.1 正则表达式对象转换</h3><ul>
<li><p><code>re.compile(pattern[, flags])</code>：用于编译正则表达式，生成一个正则表达式（ Pattern ）对象，供 <code>match()</code> 和 <code>search()</code> 这两个函数使用。</p>
<p>  参数：</p>
<ul>
<li><code>pattern</code> : 一个字符串形式的正则表达式</li>
<li><code>flags</code> : 可选，表示匹配模式，比如忽略大小写，多行模式等，具体参数为：<ol>
<li><code>re.I</code> 忽略大小写</li>
<li><code>re.L</code> 表示特殊字符集 \w, \W, \b, \B, \s, \S 依赖于当前环境</li>
<li><code>re.M</code> 多行模式</li>
<li><code>re.S</code> 即为 <code>.</code> 并且包括换行符在内的任意字符（**.** 不包括换行符）</li>
<li><code>re.U</code> 表示特殊字符集 \w, \W, \b, \B, \d, \D, \s, \S 依赖于 Unicode 字符属性数据库</li>
<li><code>re.X</code> 为了增加可读性，忽略空格和 <strong>#</strong> 后面的注释</li>
</ol>
</li>
</ul>
</li>
</ul>
<p>当匹配成功时返回一个 Match 对象，其中：</p>
<ul>
<li><code>group([group1, …])</code> 方法用于获得一个或多个分组匹配的字符串，当要获得整个匹配的子串时，可直接使用 <code>group()</code> 或 <code>group(0)</code></li>
<li><code>start([group])</code> 方法用于获取分组匹配的子串在整个字符串中的起始位置（子串第一个字符的索引），参数默认值为 0</li>
<li><code>end([group])</code> 方法用于获取分组匹配的子串在整个字符串中的结束位置（子串最后一个字符的索引+1），参数默认值为 0</li>
<li><code>span([group])</code> 方法返回 <code>(start(group), end(group))</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2-2-匹配字符串"><a href="#2-2-匹配字符串" class="headerlink" title="2.2 匹配字符串"></a>2.2 匹配字符串</h3><h4 id="2-2-1-match"><a href="#2-2-1-match" class="headerlink" title="2.2.1 match()"></a>2.2.1 <code>match()</code></h4><p><code>match(pattern, string, flags=0)</code>：从字符串的<strong>开始处</strong>进行匹配，如果不是起始位置匹配成功的话，<code>match()</code> 就返回 <code>None</code>。</p>
<p>参数说明：</p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">pattern</td>
<td align="left">匹配的正则表达式</td>
</tr>
<tr>
<td align="left">string</td>
<td align="left">要匹配的字符串。</td>
</tr>
<tr>
<td align="left">flags</td>
<td align="left">标志位，用于控制正则表达式的匹配方式，如：是否区分大小写，多行匹配等等。（参见：正则表达式修饰符 - 可选标志）</td>
</tr>
</tbody></table>
<h5 id="1-正则表达式修饰符-可选标志"><a href="#1-正则表达式修饰符-可选标志" class="headerlink" title="[1] 正则表达式修饰符 - 可选标志"></a>[1] 正则表达式修饰符 - 可选标志</h5><p>正则表达式可以包含一些可选标志修饰符来控制匹配的模式。修饰符被指定为一个可选的标志。多个标志可以通过按位 <code>OR(|)</code> 它们来指定。如 <code>re.I | re.M</code> 被设置成 <code>I</code> 和 <code>M</code> 标志：</p>
<table>
<thead>
<tr>
<th>修饰符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>re.I</td>
<td>使匹配对大小写不敏感</td>
</tr>
<tr>
<td>re.L</td>
<td>做本地化识别（locale-aware）匹配</td>
</tr>
<tr>
<td>re.M</td>
<td>多行匹配，影响 ^ 和 $</td>
</tr>
<tr>
<td>re.S</td>
<td>使 . 匹配包括换行在内的所有字符</td>
</tr>
<tr>
<td>re.U</td>
<td>根据Unicode字符集解析字符。这个标志影响 \w, \W, \b, \B.</td>
</tr>
<tr>
<td>re.X</td>
<td>该标志通过给予你更灵活的格式以便你将正则表达式写得更易于理解。</td>
</tr>
<tr>
<td>re.A</td>
<td>只进行ASCII匹配</td>
</tr>
</tbody></table>
<h5 id="2-正则表达式模式"><a href="#2-正则表达式模式" class="headerlink" title="[2] 正则表达式模式"></a>[2] 正则表达式模式</h5><p>模式字符串使用特殊的语法来表示一个正则表达式：</p>
<ul>
<li>字母和数字表示他们自身。一个正则表达式模式中的字母和数字匹配同样的字符串。</li>
<li>多数字母和数字前加一个反斜杠时会拥有不同的含义。</li>
<li>标点符号只有被转义时才匹配自身，否则它们表示特殊的含义。</li>
<li>反斜杠本身需要使用反斜杠转义。</li>
<li>由于正则表达式通常都包含反斜杠，所以你最好使用原始字符串来表示它们。模式元素(如 <code>r&#39;\t&#39;</code>，等价于 <code>&#39;\\t&#39;</code>)匹配相应的特殊字符。</li>
</ul>
<p>下表列出了正则表达式模式语法中的特殊元素。如果使用模式的同时提供了可选的标志参数，某些模式元素的含义会改变。</p>
<table>
<thead>
<tr>
<th align="left">模式</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">^</td>
<td align="left">匹配字符串的开头</td>
</tr>
<tr>
<td align="left">$</td>
<td align="left">匹配字符串的末尾。</td>
</tr>
<tr>
<td align="left">.</td>
<td align="left">匹配任意字符，除了换行符，当re.DOTALL标记被指定时，则可以匹配包括换行符的任意字符。</td>
</tr>
<tr>
<td align="left">[…]</td>
<td align="left">用来表示一组字符,单独列出：[amk] 匹配 ‘a’，’m’或’k’</td>
</tr>
<tr>
<td align="left">[^…]</td>
<td align="left">不在[]中的字符：[^abc] 匹配除了a,b,c之外的字符。</td>
</tr>
<tr>
<td align="left">re*</td>
<td align="left">匹配0个或多个的表达式。</td>
</tr>
<tr>
<td align="left">re+</td>
<td align="left">匹配1个或多个的表达式。</td>
</tr>
<tr>
<td align="left">re?</td>
<td align="left">匹配0个或1个由前面的正则表达式定义的片段，非贪婪方式</td>
</tr>
<tr>
<td align="left">re{ n}</td>
<td align="left">精确匹配 n 个前面表达式。例如， <strong>o{2}</strong> 不能匹配 “Bob” 中的 “o”，但是能匹配 “food” 中的两个 o。</td>
</tr>
<tr>
<td align="left">re{n,}</td>
<td align="left">匹配 n 个前面表达式。例如， o{2,} 不能匹配”Bob”中的”o”，但能匹配 “foooood”中的所有 o。”o{1,}” 等价于 “o+”。”o{0,}” 则等价于 “o*”。</td>
</tr>
<tr>
<td align="left">re{n,m}</td>
<td align="left">匹配 n 到 m 次由前面的正则表达式定义的片段，贪婪方式</td>
</tr>
<tr>
<td align="left">a| b</td>
<td align="left">匹配a或b</td>
</tr>
<tr>
<td align="left">(re)</td>
<td align="left">对正则表达式分组并记住匹配的文本</td>
</tr>
<tr>
<td align="left">(?imx)</td>
<td align="left">正则表达式包含三种可选标志：i, m, 或 x 。只影响括号中的区域。</td>
</tr>
<tr>
<td align="left">(?-imx)</td>
<td align="left">正则表达式关闭 i, m, 或 x 可选标志。只影响括号中的区域。</td>
</tr>
<tr>
<td align="left">(?: re)</td>
<td align="left">类似 (…), 但是不表示一个组</td>
</tr>
<tr>
<td align="left">(?imx:re)</td>
<td align="left">在括号中使用i, m, 或 x 可选标志</td>
</tr>
<tr>
<td align="left">(?-imx:re)</td>
<td align="left">在括号中不使用i, m, 或 x 可选标志</td>
</tr>
<tr>
<td align="left">(?#…)</td>
<td align="left">注释.</td>
</tr>
<tr>
<td align="left">(?&#x3D; re)</td>
<td align="left">前向肯定界定符。如果所含正则表达式，以 … 表示，在当前位置成功匹配时成功，否则失败。但一旦所含表达式已经尝试，匹配引擎根本没有提高；模式的剩余部分还要尝试界定符的右边。</td>
</tr>
<tr>
<td align="left">(?! re)</td>
<td align="left">前向否定界定符。与肯定界定符相反；当所含表达式不能在字符串当前位置匹配时成功</td>
</tr>
<tr>
<td align="left">(?&gt; re)</td>
<td align="left">匹配的独立模式，省去回溯。</td>
</tr>
<tr>
<td align="left">\w</td>
<td align="left">匹配字母数字及下划线</td>
</tr>
<tr>
<td align="left">\W</td>
<td align="left">匹配非字母数字及下划线</td>
</tr>
<tr>
<td align="left">\s</td>
<td align="left">匹配任意空白字符，等价于 **[ \t\n\r\f]**。</td>
</tr>
<tr>
<td align="left">\S</td>
<td align="left">匹配任意非空字符</td>
</tr>
<tr>
<td align="left">\d</td>
<td align="left">匹配任意数字，等价于 [0-9].</td>
</tr>
<tr>
<td align="left">\D</td>
<td align="left">匹配任意非数字</td>
</tr>
<tr>
<td align="left">\A</td>
<td align="left">匹配字符串开始</td>
</tr>
<tr>
<td align="left">\Z</td>
<td align="left">匹配字符串结束，如果是存在换行，只匹配到换行前的结束字符串。</td>
</tr>
<tr>
<td align="left">\z</td>
<td align="left">匹配字符串结束</td>
</tr>
<tr>
<td align="left">\G</td>
<td align="left">匹配最后匹配完成的位置。</td>
</tr>
<tr>
<td align="left">\b</td>
<td align="left">匹配一个单词边界，也就是指单词和空格间的位置。例如， ‘er\b’ 可以匹配”never” 中的 ‘er’，但不能匹配 “verb” 中的 ‘er’。</td>
</tr>
<tr>
<td align="left">\B</td>
<td align="left">匹配非单词边界。’er\B’ 能匹配 “verb” 中的 ‘er’，但不能匹配 “never” 中的 ‘er’。</td>
</tr>
<tr>
<td align="left">\n, \t, 等.</td>
<td align="left">匹配一个换行符。匹配一个制表符。等</td>
</tr>
<tr>
<td align="left">\1…\9</td>
<td align="left">匹配第n个分组的内容。</td>
</tr>
<tr>
<td align="left">\10</td>
<td align="left">匹配第n个分组的内容，如果它经匹配。否则指的是八进制字符码的表达式。</td>
</tr>
</tbody></table>
<blockquote>
<p><code>+</code>匹配一个或多个，如<code>\d+</code>就是匹配一个或多个数字：0，11，234。</p>
</blockquote>
<h5 id="3-获取匹配表达式"><a href="#3-获取匹配表达式" class="headerlink" title="[3] 获取匹配表达式"></a>[3] 获取匹配表达式</h5><p>可以使用 group(num) 或 groups() 匹配对象函数来获取匹配表达式。</p>
<table>
<thead>
<tr>
<th align="left">匹配对象方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">group(num&#x3D;0)</td>
<td align="left">匹配的整个表达式的字符串，group() 可以一次输入多个组号，在这种情况下它将返回一个包含那些组所对应值的元组。</td>
</tr>
<tr>
<td align="left">groups()</td>
<td align="left">返回一个包含所有小组字符串的元组，从 1 到 所含的小组号。</td>
</tr>
</tbody></table>
<p>例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">pattern = <span class="string">r&#x27;yyl&#x27;</span></span><br><span class="line"></span><br><span class="line">s1 = <span class="string">&#x27;yyldsiphdkd123jksnyylsfkd45f&#x27;</span></span><br><span class="line">match1 = re.match(pattern, s1, re.I)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;pattern与s1的匹配状况为：<span class="subst">&#123;match1&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;匹配值的起始位置为：<span class="subst">&#123;match1.start()&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;匹配值的结束位置为：<span class="subst">&#123;match1.end()&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;匹配位置的元组为：<span class="subst">&#123;match1.span()&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;要匹配的字符串为：<span class="subst">&#123;match1.string&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;匹配的数据为：<span class="subst">&#123;match1.group()&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s2 = <span class="string">&#x27;d3k4jfnklh&lt;jCOPyyl&#x27;</span></span><br><span class="line">match2 = re.match(pattern, s2,re.I)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;pattern与s2的匹配状况为：<span class="subst">&#123;match2&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pattern与s1的匹配状况为：&lt;re.Match object; span=(0, 3), match=&#x27;yyl&#x27;&gt;</span><br><span class="line">匹配值的起始位置为：0</span><br><span class="line">匹配值的结束位置为：3</span><br><span class="line">匹配位置的元组为：(0, 3)</span><br><span class="line">要匹配的字符串为：yyldsiphdkd123jksnyylsfkd45f</span><br><span class="line">匹配的数据为：yyl</span><br><span class="line">pattern与s2的匹配状况为：None</span><br></pre></td></tr></table></figure>



<h4 id="2-2-2-search"><a href="#2-2-2-search" class="headerlink" title="2.2.2 search()"></a>2.2.2 search()</h4><p><code>re.search(pattern, string, flags=0)</code>：在整个字符串中搜索第一个匹配的值，匹配成功<code>re.search</code>方法返回一个匹配的对象，否则返回<code>None</code>。</p>
<p>其余方法同<code>match()</code></p>
<p>例子： </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">s3 = <span class="string">&#x27;d3k4jfnklh&lt;jCOPyyl&#x27;</span></span><br><span class="line">match3 = re.search(pattern, s3,re.I)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;pattern与s2的匹配状况为：<span class="subst">&#123;match3&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;匹配值的起始位置为：<span class="subst">&#123;match3.start()&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;匹配值的结束位置为：<span class="subst">&#123;match3.end()&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;匹配位置的元组为：<span class="subst">&#123;match3.span()&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;要匹配的字符串为：<span class="subst">&#123;match3.string&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;匹配的数据为：<span class="subst">&#123;match3.group()&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pattern与s2的匹配状况为：&lt;re.Match object; span=(15, 18), match=&#x27;yyl&#x27;&gt;</span><br><span class="line">匹配值的起始位置为：15</span><br><span class="line">匹配值的结束位置为：18</span><br><span class="line">匹配位置的元组为：(15, 18)</span><br><span class="line">要匹配的字符串为：d3k4jfnklh&lt;jCOPyyl</span><br><span class="line">匹配的数据为：yyl</span><br></pre></td></tr></table></figure>



<h4 id="2-2-3-findall"><a href="#2-2-3-findall" class="headerlink" title="2.2.3 findall()"></a>2.2.3 findall()</h4><p><code>findall(string[, pos[, endpos]])</code>：在整个字符串中搜索所有符合正则表达式的字符串，返回列表。</p>
<p>参数：</p>
<ul>
<li>string : 待匹配的字符串。</li>
<li>pos : 可选参数，指定字符串的起始位置，默认为 0。</li>
<li>endpos : 可选参数，指定字符串的结束位置，默认为字符串的长度</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 匹配正则表达式:yyl</span></span><br><span class="line">pattern = <span class="string">r&#x27;yyl&#x27;</span></span><br><span class="line">s4 = <span class="string">&#x27;d3k42jfyylnklh&lt;jCOPyyl&#x27;</span></span><br><span class="line">match4 = re.findall(pattern, s4)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;pattern与s4的匹配结果为：<span class="subst">&#123;match4&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 匹配正则表达式:一个任意数字</span></span><br><span class="line">pattern1 = <span class="string">r&#x27;\d&#x27;</span></span><br><span class="line">match5 = re.findall(pattern1, s4)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;pattern1与s4的匹配结果为：<span class="subst">&#123;match5&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 匹配正则表达式:一个或多个任意数字</span></span><br><span class="line">pattern2 = <span class="string">r&#x27;\d+&#x27;</span></span><br><span class="line">match6 = re.findall(pattern2, s4)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;pattern2与s4的匹配结果为：<span class="subst">&#123;match6&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pattern与s4的匹配结果为：[&#x27;yyl&#x27;, &#x27;yyl&#x27;]</span><br><span class="line">pattern1与s4的匹配结果为：[&#x27;3&#x27;, &#x27;4&#x27;, &#x27;2&#x27;]</span><br><span class="line">pattern2与s4的匹配结果为：[&#x27;3&#x27;, &#x27;42&#x27;]</span><br></pre></td></tr></table></figure>



<h3 id="2-3-替换字符串sub"><a href="#2-3-替换字符串sub" class="headerlink" title="2.3 替换字符串sub()"></a>2.3 替换字符串<code>sub()</code></h3><p><code>re.sub(pattern, repl, string, count=0, flags=0)</code>：实现字符串替换中的匹配项。</p>
<p>参数：</p>
<ul>
<li>pattern : 正则中的模式字符串。</li>
<li>repl : 替换的字符串，也可为一个函数。</li>
<li>string : 要被查找替换的原始字符串。</li>
<li>count : 模式匹配后替换的最大次数，默认 0 表示替换所有的匹配。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">phone = <span class="string">&quot;2004-959-559 # 这是一个国外电话号码&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除字符串中的 Python注释</span></span><br><span class="line">num = re.sub(<span class="string">r&#x27;#.*$&#x27;</span>, <span class="string">&quot;&quot;</span>, phone)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;电话号码是: &quot;</span>, num)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除非数字(-)的字符串</span></span><br><span class="line">num = re.sub(<span class="string">r&#x27;\D&#x27;</span>, <span class="string">&quot;&quot;</span>, phone)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;电话号码是 : &quot;</span>, num)</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">电话号码是:  2004-959-559 </span><br><span class="line">电话号码是 :  2004959559</span><br></pre></td></tr></table></figure>



<h3 id="2-4-分割字符串split"><a href="#2-4-分割字符串split" class="headerlink" title="2.4 分割字符串split()"></a>2.4 分割字符串<code>split()</code></h3><p><code>re.split(pattern, string[, maxsplit=0, flags=0])</code>：根据匹配的子串将字符串分割后返回列表</p>
<p>参数：</p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">pattern</td>
<td align="left">匹配的正则表达式</td>
</tr>
<tr>
<td align="left">string</td>
<td align="left">要匹配的字符串。</td>
</tr>
<tr>
<td align="left">maxsplit</td>
<td align="left">分隔次数，maxsplit&#x3D;1 分隔一次，默认为 0，不限制次数。</td>
</tr>
<tr>
<td align="left">flags</td>
<td align="left">标志位，用于控制正则表达式的匹配方式，如：是否区分大小写，多行匹配等等。（参见：正则表达式修饰符 - 可选标志）</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pattern = <span class="string">r&#x27;[?|&amp;]&#x27;</span></span><br><span class="line">url = <span class="string">&#x27;https://space.bilibili.com/3063235/favlist?spm_id_from=333.1007.0.0&#x27;</span></span><br><span class="line">r = re.split(pattern, url)</span><br><span class="line"><span class="built_in">print</span>(r)</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#x27;https://space.bilibili.com/3063235/favlist&#x27;,&#x27;spm_id_from=333.1007.0.0&#x27;]</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/08/15-8-%E5%86%85%E7%BD%AE%E5%BA%93json/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="杨艺琳">
      <meta itemprop="description" content="我就是这条街最靓的仔">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨艺琳的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/08/15-8-%E5%86%85%E7%BD%AE%E5%BA%93json/" class="post-title-link" itemprop="url">15.8 内置库json</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-03-08 10:10:59" itemprop="dateCreated datePublished" datetime="2022-03-08T10:10:59+08:00">2022-03-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-03-23 15:35:58" itemprop="dateModified" datetime="2022-03-23T15:35:58+08:00">2022-03-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%B5%8B%E8%AF%95%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">测试学习</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h1><ul>
<li><code>JSON</code> 是用于存储和交换数据的语法，是一种轻量级的数据交换格式。</li>
<li>使用场景<ul>
<li>接口数据传输</li>
<li>序列化</li>
<li>配置文件</li>
</ul>
</li>
</ul>
<h2 id="JSON-结构"><a href="#JSON-结构" class="headerlink" title="JSON 结构"></a>JSON 结构</h2><h3 id="1-键值对形式"><a href="#1-键值对形式" class="headerlink" title="1. 键值对形式"></a>1. 键值对形式</h3><p>是一个无序的<code>键:值</code>对集合。一个对象以<code>&#123;</code>开始，<code>&#125;</code>结束。每个键后跟一个<code>:</code>，<code>键:值</code>对之间使用<code>,</code>分隔。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">12</span><span class="punctuation">,</span> <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;张三&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="attr">&quot;sheng&quot;</span><span class="punctuation">:</span><span class="string">&quot;湖南&quot;</span><span class="punctuation">,</span><span class="attr">&quot;shi&quot;</span><span class="punctuation">:</span><span class="string">&quot;张家界&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-数组形式"><a href="#2-数组形式" class="headerlink" title="2. 数组形式"></a>2. 数组形式</h3><p>是<code>值</code>的有序集合。一个数组以 <code>[</code> 开始，<code>]</code> 结束。值之间使用 <code>,</code> 分隔。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span><span class="string">&quot;a&quot;</span><span class="punctuation">,</span><span class="string">&quot;b&quot;</span><span class="punctuation">,</span><span class="string">&quot;c&quot;</span><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>

<h4 id="Json格式嵌套"><a href="#Json格式嵌套" class="headerlink" title="Json格式嵌套"></a>Json格式嵌套</h4><p><code>值</code>可以是双引号括起来的字符串（string）、数值（number）、true、false、null、对象（object）或者数组（array）。这些结构可以嵌套。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;吃饭&quot;</span><span class="punctuation">,</span><span class="string">&quot;睡觉&quot;</span><span class="punctuation">,</span><span class="string">&quot;打豆豆&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">15</span><span class="punctuation">,</span> </span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;李四&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;哈哈&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;ss&quot;</span><span class="punctuation">,</span><span class="string">&quot;sa&quot;</span><span class="punctuation">]</span></span><br><span class="line">	<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;喜欢悠哉悠哉独自在&quot;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>



<h2 id="Python-与-JSON-数据类型对应-转换表"><a href="#Python-与-JSON-数据类型对应-转换表" class="headerlink" title="Python 与 JSON 数据类型对应 转换表"></a>Python 与 JSON 数据类型对应 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.10/library/json.html#py-to-json-table">转换表</a></h2><table>
<thead>
<tr>
<th align="center">Python</th>
<th align="center">JSON</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">dict</td>
<td align="center">object</td>
<td align="center">字典</td>
</tr>
<tr>
<td align="center">list ，tuple</td>
<td align="center">array</td>
<td align="center">序列</td>
</tr>
<tr>
<td align="center">str</td>
<td align="center">string</td>
<td align="center">字符串</td>
</tr>
<tr>
<td align="center">int ，float</td>
<td align="center">number</td>
<td align="center">数字类型</td>
</tr>
<tr>
<td align="center">True</td>
<td align="center">true</td>
<td align="center">布尔值True</td>
</tr>
<tr>
<td align="center">False</td>
<td align="center">false</td>
<td align="center">布尔值False</td>
</tr>
<tr>
<td align="center">None</td>
<td align="center">null</td>
<td align="center">空值</td>
</tr>
</tbody></table>
<h2 id="json-库"><a href="#json-库" class="headerlink" title="json 库"></a>json 库</h2><ul>
<li>可以从字符串或文件中解析 <code>JSON</code></li>
<li>该库解析 <code>JSON</code> 后将其转为 <code>Python</code> 字典或者列表</li>
</ul>
<h2 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h2><h3 id="1-dump"><a href="#1-dump" class="headerlink" title="1.dump()"></a>1.<code>dump()</code></h3><p> 将Python 对象编码，并将数据写入 json 文件中</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">json.dump(obj, fp, *, skipkeys=<span class="literal">False</span>, ensure_ascii=<span class="literal">True</span>, check_circular=<span class="literal">True</span>, allow_nan=<span class="literal">True</span>, cls=<span class="literal">None</span>, indent=<span class="literal">None</span>, separators=<span class="literal">None</span>, default=<span class="literal">None</span>, sort_keys=<span class="literal">False</span>, **kw)</span><br></pre></td></tr></table></figure>

<p>使用这个 <code>转换表</code> 将 <em>obj</em> 序列化为 JSON 格式化流形式的 <em>fp</em></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 写入 JSON 数据，在代码当前目录生成一个 data.json 的文件</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;data.json&#x27;</span>, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    json.dump(data, f, ensure_ascii=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<p>结果：<code>data.json</code></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span><span class="string">&quot;吃饭&quot;</span><span class="punctuation">,</span> <span class="string">&quot;睡觉&quot;</span><span class="punctuation">,</span> <span class="string">&quot;打豆豆&quot;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span><span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">15</span><span class="punctuation">,</span> <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;李四&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;哈哈&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;ss&quot;</span><span class="punctuation">,</span> <span class="string">&quot;sa&quot;</span><span class="punctuation">]</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="string">&quot;喜欢悠哉悠哉独自在&quot;</span><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>

<h3 id="2-dumps"><a href="#2-dumps" class="headerlink" title="2.dumps()"></a>2.<code>dumps()</code></h3><p>将 Python 对象编码成 JSON <strong>字符串</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">json.dumps(obj, *, skipkeys=<span class="literal">False</span>, ensure_ascii=<span class="literal">True</span>, check_circular=<span class="literal">True</span>, allow_nan=<span class="literal">True</span>, cls=<span class="literal">None</span>, indent=<span class="literal">None</span>, separators=<span class="literal">None</span>, default=<span class="literal">None</span>, sort_keys=<span class="literal">False</span>, **kw)</span><br></pre></td></tr></table></figure>

<p>使用这个  <code>转换表</code>将 <em>obj</em> 序列化为 JSON 格式的 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.10/library/stdtypes.html#str"><code>str</code></a>。 其参数的含义与 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.10/library/json.html#json.dump"><code>dump()</code></a> 中的相同。</p>
<blockquote>
<p>JSON 中的键-值对中的键永远是 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.10/library/stdtypes.html#str"><code>str</code></a> 类型的。当一个对象被转化为 JSON 时，字典中所有的键都会被强制转换为字符串。这所造成的结果是字典被转换为 JSON 然后转换回字典时可能和原来的不相等。换句话说，如果 <code>x</code> 具有非字符串的键，则有 <code>loads(dumps(x)) != x</code>。</p>
</blockquote>
<h4 id="dumps-常用参数"><a href="#dumps-常用参数" class="headerlink" title="dumps 常用参数"></a>dumps 常用参数</h4><ul>
<li><code>indent</code>：根据数据格式缩进显示，默认为 <code>None</code>，没有缩进</li>
<li><code>ensure_ascii</code>：对中文使用 <code>ASCII</code> 编码，默认为 &#96;True</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义 python 结构</span></span><br><span class="line">data = [<span class="string">&quot;吃饭&quot;</span>, <span class="string">&quot;睡觉&quot;</span>, <span class="string">&quot;打豆豆&quot;</span>, &#123;<span class="string">&quot;age&quot;</span>: <span class="number">15</span>, <span class="string">&quot;name&quot;</span>: <span class="string">&quot;李四&quot;</span>, <span class="string">&quot;哈哈&quot;</span>: [<span class="string">&quot;ss&quot;</span>, <span class="string">&quot;sa&quot;</span>]&#125;, <span class="string">&quot;喜欢悠哉悠哉独自在&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将 python 对象编码为 JSON 字符串，indent——缩进格数，ensure_ascii——是否用ASCII编码(有中文时选择False)</span></span><br><span class="line">json_data = json.dumps(data, indent=<span class="number">4</span>, ensure_ascii=<span class="literal">False</span>)</span><br><span class="line"><span class="built_in">print</span>(json_data)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(json_data))</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &quot;吃饭&quot;,</span><br><span class="line">    &quot;睡觉&quot;,</span><br><span class="line">    &quot;打豆豆&quot;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;age&quot;: 15,</span><br><span class="line">        &quot;name&quot;: &quot;李四&quot;,</span><br><span class="line">        &quot;哈哈&quot;: [</span><br><span class="line">            &quot;ss&quot;,</span><br><span class="line">            &quot;sa&quot;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;喜欢悠哉悠哉独自在&quot;</span><br><span class="line">]</span><br><span class="line">&lt;class &#x27;str&#x27;&gt;</span><br></pre></td></tr></table></figure>



<h3 id="3-load"><a href="#3-load" class="headerlink" title="3.load()"></a>3.<code>load()</code></h3><p>从 json 文件中读取数据并解码为 Python 对象</p>
<p>使用这个  <code>转换表</code>将 <em>fp</em> (一个支持 <code>.read()</code> 并包含一个 JSON 文档的 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.10/glossary.html#term-text-file">text file</a> 或者 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.10/glossary.html#term-binary-file">binary file</a> 反序列化为一个 Python 对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">json.load(fp, *, cls=<span class="literal">None</span>, object_hook=<span class="literal">None</span>, parse_float=<span class="literal">None</span>, parse_int=<span class="literal">None</span>, parse_constant=<span class="literal">None</span>, object_pairs_hook=<span class="literal">None</span>, **kw)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;data.json&#x27;</span>, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    data = json.load(f)</span><br><span class="line">    <span class="built_in">print</span>(data)</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">type</span>(data))</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span>&#x27;吃饭&#x27;<span class="punctuation">,</span> &#x27;睡觉&#x27;<span class="punctuation">,</span> &#x27;打豆豆&#x27;<span class="punctuation">,</span> <span class="punctuation">&#123;</span>&#x27;age&#x27;<span class="punctuation">:</span> <span class="number">15</span><span class="punctuation">,</span> &#x27;name&#x27;<span class="punctuation">:</span> &#x27;李四&#x27;<span class="punctuation">,</span> &#x27;哈哈&#x27;<span class="punctuation">:</span> <span class="punctuation">[</span>&#x27;ss&#x27;<span class="punctuation">,</span> &#x27;sa&#x27;<span class="punctuation">]</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> &#x27;喜欢悠哉悠哉独自在&#x27;<span class="punctuation">]</span></span><br><span class="line">&lt;class &#x27;list&#x27;&gt;</span><br></pre></td></tr></table></figure>



<h3 id="4-loads"><a href="#4-loads" class="headerlink" title="4.loads()"></a>4.<code>loads()</code></h3><p>解码 JSON 数据（字符串），该函数返回 <strong>Python 对象</strong></p>
<p>使用这个  <code>转换表</code> 将 <em>s</em> (一个包含 JSON 文档的 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.10/library/stdtypes.html#str"><code>str</code></a>, <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.10/library/stdtypes.html#bytes"><code>bytes</code></a> 或 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.10/library/stdtypes.html#bytearray"><code>bytearray</code></a> 实例) 反序列化为 Python 对象。其他参数的含义与 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.10/library/json.html#json.load"><code>load()</code></a> 中的相同。</p>
<p>如果反序列化的数据不是有效 JSON 文档，引发 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.10/library/json.html#json.JSONDecodeError"><code>JSONDecodeError</code></a> 错误。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">json.loads(s, *, cls=<span class="literal">None</span>, object_hook=<span class="literal">None</span>, parse_float=<span class="literal">None</span>, parse_int=<span class="literal">None</span>, parse_constant=<span class="literal">None</span>, object_pairs_hook=<span class="literal">None</span>, **kw)</span><br></pre></td></tr></table></figure>








      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/07/15-5-%E5%86%85%E7%BD%AE%E5%BA%93-%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="杨艺琳">
      <meta itemprop="description" content="我就是这条街最靓的仔">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨艺琳的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/07/15-5-%E5%86%85%E7%BD%AE%E5%BA%93-%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/" class="post-title-link" itemprop="url">15.5 内置库-文件处理</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-03-07 14:53:35" itemprop="dateCreated datePublished" datetime="2022-03-07T14:53:35+08:00">2022-03-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-03-10 09:35:08" itemprop="dateModified" datetime="2022-03-10T09:35:08+08:00">2022-03-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%B5%8B%E8%AF%95%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">测试学习</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="1-IO操作"><a href="#1-IO操作" class="headerlink" title="1 IO操作"></a>1 IO操作</h1><img src="/2022/03/07/15-5-%E5%86%85%E7%BD%AE%E5%BA%93-%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/image-20220307145425826.png" alt="image-20220307145425826" style="zoom: 43%;">



<h1 id="2-文件操作步骤"><a href="#2-文件操作步骤" class="headerlink" title="2 文件操作步骤"></a>2 文件操作步骤</h1><ol>
<li><p>打开文件</p>
</li>
<li><p>操作文件</p>
<p> 读&#x2F;写内容</p>
</li>
<li><p>关闭文件<br> （读写完成，要及时的关闭）</p>
</li>
</ol>
<h2 id="2-1-open方法"><a href="#2-1-open方法" class="headerlink" title="2.1 open方法"></a>2.1 <code>open</code>方法</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># file参数必填</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">open</span>(<span class="params">file, mode=<span class="string">&#x27;r&#x27;</span>, buffering=<span class="literal">None</span>, encoding=<span class="literal">None</span>,errors=<span class="literal">None</span>, newline=<span class="literal">None</span>, closefd=<span class="literal">True</span></span>):</span><br></pre></td></tr></table></figure>

<p>如有一个<code>test.txt</code>文件如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1234</span><br><span class="line">testtesttesttesttest</span><br></pre></td></tr></table></figure>

<h2 id="2-2-文件读写方式"><a href="#2-2-文件读写方式" class="headerlink" title="2.2 文件读写方式"></a>2.2 文件读写方式</h2><table>
<thead>
<tr>
<th align="center">文件打开模式</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>r</code></td>
<td>以只读模式打开文件，并将文件指针指向文件头；如果文件不存在会报错</td>
</tr>
<tr>
<td align="center"><code>w</code></td>
<td>以只写模式打开文件，并将文件指针指向文件头；如果文件存在则将其内容清空，如果文件不存在则创建</td>
</tr>
<tr>
<td align="center"><code>a</code></td>
<td>以只追加可写模式打开文件，并将文件指针指向文件尾部；如果文件不存在则创建</td>
</tr>
<tr>
<td align="center"><code>r+</code></td>
<td>在<code>r</code>的基础上增加了可写功能</td>
</tr>
<tr>
<td align="center"><code>w+</code></td>
<td>在<code>w</code>的基础上增加了可读功能</td>
</tr>
<tr>
<td align="center"><code>a+</code></td>
<td>在a的基础上增加了可读功能</td>
</tr>
<tr>
<td align="center"><code>b</code></td>
<td>读写二进制文件（默认是<code>t</code>，表示文本），需要与上面几种模式搭配使用，如<code>ab</code>，<code>wb</code>，<code>ab+</code>（<code>POSIX</code>系统，包括<code>Linux</code>都会忽略该字符）</td>
</tr>
</tbody></table>
<h2 id="2-3-读操作"><a href="#2-3-读操作" class="headerlink" title="2.3 读操作"></a>2.3 读操作</h2><table>
<thead>
<tr>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>read()</code></td>
<td>一次读取文件所有内容，返回一个<code>str</code></td>
</tr>
<tr>
<td><code>read(size)</code></td>
<td>每次最多读取指定长度的内容，返回一个<code>str</code>；在<code>Python2</code>中<code>size</code>指定的是<strong>字节</strong>长度，在<code>Python3</code>中<code>size</code>指定的是<strong>字符</strong>长度</td>
</tr>
<tr>
<td><code>readlines()</code></td>
<td>一次读取文件所有内容，按行返回一个<code>list</code></td>
</tr>
<tr>
<td><code>readline()</code></td>
<td>每次只读取一行内容</td>
</tr>
</tbody></table>
<p>例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;python/test.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取10位字符，换行符也算一个字符</span></span><br><span class="line"><span class="built_in">print</span>(f.read(<span class="number">10</span>))</span><br><span class="line"><span class="comment"># 光标移动到读取十位字符后位置，接下来读取剩下的全部内容</span></span><br><span class="line"><span class="built_in">print</span>(f.readlines())</span><br><span class="line"></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1234</span><br><span class="line">testt</span><br><span class="line">[&#x27;esttesttesttest&#x27;]</span><br></pre></td></tr></table></figure>

<blockquote>
<p>读完一次之后，再次读取文件，内容将不是完整的，需要重新设置游标位置，使用<code>f.seek(0)</code></p>
</blockquote>
<p>在第5行后添加代码：<code>f.seek(0)</code>，再次运行代码，输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1234</span><br><span class="line">testt</span><br><span class="line">[&#x27;1234\n&#x27;, &#x27;testtesttesttesttest&#x27;]</span><br></pre></td></tr></table></figure>

<p>输入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(f.readline())</span><br><span class="line"><span class="built_in">print</span>(f.readline())</span><br></pre></td></tr></table></figure>

<p>得到：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1234</span><br><span class="line"></span><br><span class="line">testtesttesttesttest</span><br></pre></td></tr></table></figure>

<blockquote>
<p>由于文件本身在第一行后就有一个换行符，且<code>print()</code>自带一个换行符所以在<code>readline()</code>两次时，输出的内容之间有一行空行。</p>
</blockquote>
<h2 id="2-4-忘记关闭文件的危害"><a href="#2-4-忘记关闭文件的危害" class="headerlink" title="2.4 忘记关闭文件的危害"></a>2.4 忘记关闭文件的危害</h2><ul>
<li>打开文件达到一定数量，将会导致打开失败</li>
<li>占用系统空间，非常浪费资源</li>
<li>会导致系统自动回收资源，从而丢失数据</li>
</ul>
<h2 id="2-5-with用法"><a href="#2-5-with用法" class="headerlink" title="2.5 with用法"></a>2.5 <code>with</code>用法</h2><p><code>with</code> 可以自动完成关闭文件的操作，建议使用。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;python/test.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="built_in">print</span>(f.read())</span><br><span class="line"><span class="comment"># 查看文件关闭状态</span></span><br><span class="line"><span class="built_in">print</span>(f.closed)</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1234</span><br><span class="line">testtesttesttesttest</span><br><span class="line">True</span><br></pre></td></tr></table></figure>

<h2 id="2-6-写操作"><a href="#2-6-写操作" class="headerlink" title="2.6 写操作"></a>2.6 写操作</h2><ul>
<li>mode &#x3D; <code>w+</code>，读写权限，清空内容再写入，如果没有文件，会新建文件</li>
<li>mode &#x3D; <code>r+</code>，读写权限，替换原来的内容</li>
<li>mode &#x3D; <code>a+</code>，读写权限，追加内容，不会清空原来的内容</li>
</ul>
<h3 id="1-w"><a href="#1-w" class="headerlink" title="1. w+"></a>1. <code>w+</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;python/test.txt&#x27;</span>, <span class="string">&#x27;w+&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="built_in">print</span>(f.write(<span class="string">&#x27;yyly\n&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yyly</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2-r"><a href="#2-r" class="headerlink" title="2. r+"></a>2. <code>r+</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;python/test.txt&#x27;</span>, <span class="string">&#x27;r+&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="built_in">print</span>(f.write(<span class="string">&#x27;yyly\n&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yyly</span><br><span class="line">testtesttesttesttest</span><br></pre></td></tr></table></figure>

<h3 id="3-a"><a href="#3-a" class="headerlink" title="3. a+"></a>3. <code>a+</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;python/test.txt&#x27;</span>, <span class="string">&#x27;a+&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="built_in">print</span>(f.write(<span class="string">&#x27;yyly\n&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1234</span><br><span class="line">testtesttesttesttestyyly</span><br><span class="line">yyly</span><br></pre></td></tr></table></figure>

<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><ol>
<li>使用<code>with</code>方法，会<strong>自动完成关闭操作</strong></li>
<li>通过<code>python</code>封装的API，可以实现读、写、追加操作</li>
<li>文件打开要使用的<code>utf-8</code>的编码格式（避免中文出现乱码）</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/07/15-4-%E5%86%85%E7%BD%AE%E5%BA%93sys/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="杨艺琳">
      <meta itemprop="description" content="我就是这条街最靓的仔">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨艺琳的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/07/15-4-%E5%86%85%E7%BD%AE%E5%BA%93sys/" class="post-title-link" itemprop="url">15.4 内置库sys</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-03-07 10:40:40 / 修改时间：14:52:58" itemprop="dateCreated datePublished" datetime="2022-03-07T10:40:40+08:00">2022-03-07</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%B5%8B%E8%AF%95%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">测试学习</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="1-内置库sys"><a href="#1-内置库sys" class="headerlink" title="1 内置库sys"></a>1 内置库sys</h1><h2 id="1-1-sys概述"><a href="#1-1-sys概述" class="headerlink" title="1.1 sys概述"></a>1.1 sys概述</h2><ul>
<li>是 Python 自带的内置模块</li>
<li>是与 Python 解释器交互的桥梁</li>
</ul>
<h2 id="1-2-sys使用"><a href="#1-2-sys使用" class="headerlink" title="1.2 sys使用"></a>1.2 sys使用</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding=gbk</span></span><br><span class="line"><span class="comment"># 导入sys模块</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看sys模块帮助文档</span></span><br><span class="line"><span class="built_in">help</span>(sys)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看sys模块的属性和方法</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">dir</span>(sys))</span><br></pre></td></tr></table></figure>

<blockquote>
<p>文件首行要进行定义：<code># coding=gbk</code>，不然会报错：<code>SyntaxError: Non-UTF-8 code starting with &#39;\xb5&#39; in file D:\PycharmProject\sys_demo.py on line 3, but no encoding declared; see https://python.org/dev/peps/pep-0263/ for details</code></p>
</blockquote>
<h3 id="常用属性"><a href="#常用属性" class="headerlink" title="常用属性"></a>常用属性</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sys.version    <span class="comment"># 返回 Python 解释器版本</span></span><br><span class="line">sys.platform    <span class="comment"># 返回操作系统平台名称</span></span><br><span class="line">sys.argv    <span class="comment"># 返回外部向程序传递的参数——</span></span><br><span class="line">sys.modules    <span class="comment"># 返回已导入的模块信息</span></span><br><span class="line">sys.path    <span class="comment"># 返回导包的搜索路径列表</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>1.<code>argv</code>可以动态收集命令行传递给参数的列表：</p>
<img src="/2022/03/07/15-4-%E5%86%85%E7%BD%AE%E5%BA%93sys/image-20220307110412839.png" alt="image-20220307110412839" style="zoom: 50%;">

<p>2.<code>sys.modules</code>返回的模块信息是<strong>字典</strong>格式的，可以通过字典的<code>keys()</code>方法，返回一个模块名称组成的一个新视图对象。</p>
<p>3.<code>sys.path</code>展示导包的搜罗路径，返回一个<strong>列表</strong>，因此可以手动添加路径，利用列表的<code>append()</code>方法。<code>PycharProject</code>下有一个<code>hello</code>文件夹内有<code>baidu.py</code>，而现在的<code>.py</code>文件位于<code>PycharProject</code>下，因此在<code>.py</code>文件要引用<code>baidu.py</code>中的方法时，如果想要手动添加路径，需要做以下处理：</p>
<img src="/2022/03/07/15-4-%E5%86%85%E7%BD%AE%E5%BA%93sys/image-20220307143133629.png" alt="image-20220307143133629" style="zoom:50%;">

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">my_dir = os.path.dirname(os.path.abspath(__file__)) + <span class="string">&quot;/hello&quot;</span></span><br><span class="line">sys.path.append(my_dir)</span><br><span class="line"><span class="keyword">from</span> baidu <span class="keyword">import</span> search</span><br><span class="line">search()</span><br></pre></td></tr></table></figure>

<p>输入<code>print(sys.path)</code>，可以找到刚才手动添加的搜索路径。</p>
<p>PS：手动添加路径只有在代码运行时生效，脚本结束后不会生效。</p>
</blockquote>
<h3 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取系统当前编码——python3为 UTF-8</span></span><br><span class="line">sys.getdefaultencoding()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行时退出</span></span><br><span class="line">sys.exit()</span><br></pre></td></tr></table></figure>

<blockquote>
<p>用一个例子来说明<code>sys.exit()</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    <span class="keyword">if</span> i == <span class="number">6</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;exiting.......&quot;</span>)</span><br><span class="line">        sys.exit(<span class="string">&quot;退出&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;running：<span class="subst">&#123;i&#125;</span>&quot;</span>)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<p>输出结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">running：<span class="number">0</span></span><br><span class="line">running：<span class="number">1</span></span><br><span class="line">running：<span class="number">2</span></span><br><span class="line">running：<span class="number">3</span></span><br><span class="line">running：<span class="number">4</span></span><br><span class="line">running：<span class="number">5</span></span><br><span class="line">exiting.......</span><br><span class="line">退出</span><br></pre></td></tr></table></figure>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/06/15-3-%E5%86%85%E7%BD%AE%E5%BA%93os/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="杨艺琳">
      <meta itemprop="description" content="我就是这条街最靓的仔">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨艺琳的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/06/15-3-%E5%86%85%E7%BD%AE%E5%BA%93os/" class="post-title-link" itemprop="url">15.3 内置库os</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-03-06 13:52:51" itemprop="dateCreated datePublished" datetime="2022-03-06T13:52:51+08:00">2022-03-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-03-07 14:28:18" itemprop="dateModified" datetime="2022-03-07T14:28:18+08:00">2022-03-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%B5%8B%E8%AF%95%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">测试学习</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="1-内置库os"><a href="#1-内置库os" class="headerlink" title="1 内置库os"></a>1 内置库os</h1><h2 id="1-1-os概述"><a href="#1-1-os概述" class="headerlink" title="1.1 os概述"></a>1.1 os概述</h2><ul>
<li>os: Operating System</li>
<li>os 模块的常用功能</li>
<li>跨平台的差异</li>
</ul>
<h2 id="1-2-os-使用"><a href="#1-2-os-使用" class="headerlink" title="1.2 os 使用"></a>1.2 os 使用</h2><ul>
<li>导入 os 模块</li>
<li>查看 os 模块使用文档<ul>
<li>help(os)</li>
<li>dir(os)</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看os模块说明文档</span></span><br><span class="line"><span class="built_in">help</span>(os)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看os模块的属性和方法</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">dir</span>(os))</span><br></pre></td></tr></table></figure>

<h2 id="1-3-os常用方法"><a href="#1-3-os常用方法" class="headerlink" title="1.3 os常用方法"></a>1.3 os常用方法</h2><h3 id="1-3-1-系统相关"><a href="#1-3-1-系统相关" class="headerlink" title="1.3.1 系统相关"></a>1.3.1 系统相关</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># os.name：获取系统名称 nt代表window，posix代表linux</span></span><br><span class="line"><span class="built_in">print</span>(os.name)</span><br><span class="line"></span><br><span class="line"><span class="comment"># os.environ：获取系统环境变量信息</span></span><br><span class="line"><span class="built_in">print</span>(os.environ)</span><br><span class="line"></span><br><span class="line"><span class="comment"># os.getenv()：获取指定名称的环境变量信息</span></span><br><span class="line"><span class="built_in">print</span>(os.getenv(<span class="string">&#x27;PATH&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># os.system()：执行系统指令</span></span><br><span class="line">os.system(<span class="string">&#x27;pwd&#x27;</span>)  <span class="comment"># linux系统</span></span><br><span class="line"><span class="built_in">print</span>(os.system(<span class="string">&#x27;dir&#x27;</span>))  <span class="comment"># windows系统</span></span><br></pre></td></tr></table></figure>



<blockquote>
<p>执行 <code>print(os.system(&#39;dir&#39;))</code>时，显示当前文件夹以及所有文件，如果出现乱码，需要手动将编码格式改为<code>GBK</code></p>
<img src="/2022/03/06/15-3-%E5%86%85%E7%BD%AE%E5%BA%93os/image-20220307103547383.png" alt="image-20220307103547383">
</blockquote>
<h3 id="1-3-2-操作目录"><a href="#1-3-2-操作目录" class="headerlink" title="1.3.2 操作目录"></a>1.3.2 操作目录</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># os.getcwd()：获取当前目录</span></span><br><span class="line"><span class="built_in">print</span>(os.getcwd())</span><br><span class="line"></span><br><span class="line"><span class="comment"># os.chdir()：切换目录</span></span><br><span class="line">os.chdir(<span class="string">&#x27;..&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># os.listdir()：列出当前目录内容</span></span><br><span class="line"><span class="built_in">print</span>(os.listdir())</span><br><span class="line"></span><br><span class="line"><span class="comment"># os.mkdir()：创建空目录</span></span><br><span class="line">os.mkdir(<span class="string">&#x27;new&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># os.makedirs()：递归创建多级目录</span></span><br><span class="line">os.makedirs(<span class="string">&#x27;a/b/c&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># os.rmdir()：删除空目录</span></span><br><span class="line">os.rmdir(<span class="string">&#x27;new&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># os.rename()：重命名目录</span></span><br><span class="line">os.rename(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a1&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># os.remove()：删除文件</span></span><br><span class="line">os.remove(<span class="string">&#x27;demo.txt&#x27;</span>)</span><br></pre></td></tr></table></figure>



<h3 id="1-3-3-操作路径"><a href="#1-3-3-操作路径" class="headerlink" title="1.3.3 操作路径"></a>1.3.3 操作路径</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">os.path.abspath(path)	<span class="comment">#返回绝对路径</span></span><br><span class="line">os.path.basename(path)	<span class="comment">#返回文件名</span></span><br><span class="line">os.path.dirname(path)	<span class="comment">#返回文件路径</span></span><br><span class="line">os.path.split(path)	<span class="comment">#分割路径</span></span><br><span class="line">os.path.join(path)	<span class="comment">#拼接路径</span></span><br><span class="line">os.path.exists(path)	<span class="comment">#判断路径是否存在</span></span><br><span class="line">os.path.isdir(path)	<span class="comment">#判断是否是目录</span></span><br><span class="line">os.path.isfile(path)	<span class="comment">#判断是否是文件</span></span><br><span class="line">os.path.getsize(path)	<span class="comment">#获取文件大小</span></span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/04/15-2-%E7%A8%8B%E5%BA%8F%E8%B0%83%E8%AF%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="杨艺琳">
      <meta itemprop="description" content="我就是这条街最靓的仔">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨艺琳的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/04/15-2-%E7%A8%8B%E5%BA%8F%E8%B0%83%E8%AF%95/" class="post-title-link" itemprop="url">15.2 程序调试</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-03-04 19:41:51 / 修改时间：20:07:22" itemprop="dateCreated datePublished" datetime="2022-03-04T19:41:51+08:00">2022-03-04</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%B5%8B%E8%AF%95%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">测试学习</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="1-程序调试"><a href="#1-程序调试" class="headerlink" title="1 程序调试"></a>1 程序调试</h1><p>程序调试是将编制的程序投入实际运行前，用手工或编译程序等方法进行测试，修正<strong>语法错误和逻辑错误</strong>的过程。</p>
<h2 id="1-1-语法错误"><a href="#1-1-语法错误" class="headerlink" title="1.1 语法错误"></a>1.1 语法错误</h2><p>编写的<code>python</code>语法不正确，导致程序编译失败。</p>
<h2 id="1-2-逻辑错误"><a href="#1-2-逻辑错误" class="headerlink" title="1.2 逻辑错误"></a>1.2 逻辑错误</h2><p>代码本身能够正常执行，但是执行完成的结果不符合预期结果。</p>
<h3 id="1-3-Bug"><a href="#1-3-Bug" class="headerlink" title="1.3 Bug"></a>1.3 Bug</h3><p>bug是计算机领域专业术语（小昆虫、虫子），计算机里叫漏洞，隐藏在程序中的一些未被发现的缺陷或问题统称为bug（漏洞）。</p>
<h2 id="1-4-调试分类"><a href="#1-4-调试分类" class="headerlink" title="1.4 调试分类"></a>1.4 调试分类</h2><ul>
<li>语法错误<ul>
<li>类型错误，语法错误，缩进错误，索引错误，键错误</li>
</ul>
</li>
<li>逻辑错误<ul>
<li>业务逻辑错误，并不会报错</li>
</ul>
</li>
</ul>
<h2 id="1-5-调试方法"><a href="#1-5-调试方法" class="headerlink" title="1.5 调试方法"></a>1.5 调试方法</h2><p>1、对应位置使用<code>print</code>或者<code>logging</code>打印日志信息<br>2、启动断点模式<code>debug</code>调试</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/04/15-1-%E9%94%99%E8%AF%AF%E4%B8%8E%E5%BC%82%E5%B8%B8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="杨艺琳">
      <meta itemprop="description" content="我就是这条街最靓的仔">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨艺琳的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/04/15-1-%E9%94%99%E8%AF%AF%E4%B8%8E%E5%BC%82%E5%B8%B8/" class="post-title-link" itemprop="url">15.1 错误与异常</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-03-04 14:51:47" itemprop="dateCreated datePublished" datetime="2022-03-04T14:51:47+08:00">2022-03-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-03-30 22:43:32" itemprop="dateModified" datetime="2022-03-30T22:43:32+08:00">2022-03-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%B5%8B%E8%AF%95%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">测试学习</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="1-语法错误与定位"><a href="#1-语法错误与定位" class="headerlink" title="1 语法错误与定位"></a>1 语法错误与定位</h1><h2 id="错误"><a href="#错误" class="headerlink" title="错误"></a>错误</h2><ul>
<li>语法错误</li>
<li>逻辑错误</li>
<li>系统错误</li>
</ul>
<h2 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h2><ul>
<li>程序执行过程中出现的未知错误</li>
<li>语法和逻辑都是正常的</li>
<li>程序业务逻辑不完善引起的程序漏洞（bug）</li>
</ul>
<h2 id="错误与异常的区别？"><a href="#错误与异常的区别？" class="headerlink" title="错误与异常的区别？"></a><strong>错误与异常的区别？</strong></h2><ul>
<li>异常可以被捕获和处理</li>
<li>错误一般是编码错误，逻辑错误，系统错误</li>
</ul>
<h2 id="异常-x2F-错误处理流程"><a href="#异常-x2F-错误处理流程" class="headerlink" title="异常&#x2F;错误处理流程"></a>异常&#x2F;错误处理流程</h2><img src="/2022/03/04/15-1-%E9%94%99%E8%AF%AF%E4%B8%8E%E5%BC%82%E5%B8%B8/image-20220304192005145.png" alt="image-20220304192005145" style="zoom:50%;">

<ul>
<li>如果是拼写、配置等引起的错误，根据出错信息排查错误出现的位置进行解决</li>
<li>如果是程序设计不完善引起的漏洞，根据漏洞的情况进行设计处理漏洞的逻辑</li>
</ul>
<h2 id="常见的异常类型"><a href="#常见的异常类型" class="headerlink" title="常见的异常类型"></a>常见的异常类型</h2><ul>
<li><p>异常类型：<a target="_blank" rel="noopener" href="https://docs.python.org/3/library/exceptions.html#bltin-exceptions">https://docs.python.org/3/library/exceptions.html#bltin-exceptions</a></p>
</li>
<li><p>常见的异常类型：</p>
<ul>
<li><p>除零类型</p>
<p>  ​    除数为0</p>
</li>
<li><p>名称异常</p>
<p>  ​    例如：参数未定义</p>
</li>
<li><p>索引异常</p>
<p>  ​    例如：列表或元组索引超出范围</p>
</li>
<li><p>键异常</p>
<p>  ​    例如：字典取值时没有键</p>
</li>
<li><p>值异常</p>
<p>  ​    例如：传入和输出的类型不一致</p>
</li>
<li><p>属性异常</p>
<p>  ​    例如：在python中有一些常量属性值，更新时发生的异常</p>
</li>
</ul>
</li>
</ul>
<h1 id="2-异常捕获-amp-异常处理"><a href="#2-异常捕获-amp-异常处理" class="headerlink" title="2 异常捕获&amp;异常处理"></a>2 异常捕获&amp;异常处理</h1><p><code>try/except</code>语句用来检测<code>try</code>语句块中的错误，从而让<code>except</code>语句捕获异常信息并处理。</p>
<p>如果不想在异常发生时结束程序，只需在<code>try</code>里捕获它。</p>
<p>例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">js</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="keyword">return</span> a / b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="built_in">print</span>(js(<span class="number">1</span>, <span class="number">1</span>))</span><br><span class="line">    list1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">    <span class="built_in">print</span>(list1[<span class="number">3</span>])</span><br><span class="line"><span class="keyword">except</span> ZeroDivisionError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(e)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;这里有一个异常&#x27;</span>)</span><br><span class="line"><span class="keyword">except</span> IndexError <span class="keyword">as</span> c:</span><br><span class="line">    <span class="built_in">print</span>(c)</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.0</span></span><br><span class="line"><span class="built_in">list</span> index out of <span class="built_in">range</span></span><br></pre></td></tr></table></figure>

<p>当然一个一个异常去处理比较麻烦，可以改写程序：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> exception:</span><br><span class="line">    <span class="built_in">print</span>(exception)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Exception是大多数异常的父类，BaseException是所有异常的父类。</p>
</blockquote>
<h2 id="方法1"><a href="#方法1" class="headerlink" title="方法1"></a>方法1</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">	执行代码</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">	发生异常时执行的代码</span><br></pre></td></tr></table></figure>

<h2 id="方法2"><a href="#方法2" class="headerlink" title="方法2"></a>方法2</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">	执行代码</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">	发生异常时执行的代码</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    没有异常时执行的代码</span><br></pre></td></tr></table></figure>

<h2 id="方法3"><a href="#方法3" class="headerlink" title="方法3"></a>方法3</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">	执行代码</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">	发生异常时执行的代码</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    没有异常时执行的代码</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    不管有没有异常都会执行的代码</span><br></pre></td></tr></table></figure>

<h2 id="方法4-手动引发异常raise"><a href="#方法4-手动引发异常raise" class="headerlink" title="方法4 手动引发异常raise"></a>方法4 手动引发异常<code>raise</code></h2><p>系统的自带的异常只要触发会自动抛出，比如<code>NameError</code>，但用户自定义的异常需要用户自己决定什么时候抛出。 <code>raise</code> 唯一的一个参数指定了要被抛出的异常。它必须是一个异常的实例或者是异常的类（也就是 <code>Exception</code> 的子类）。大多数的异常的名字都以”<code>Error</code>“结尾，所以实际命名时尽量跟标准的异常命名一样。</p>
<p>raise 语句的基本语法格式为：<code>raise [exceptionName [(reason)]]</code></p>
<p>其中，用 <code>[]</code> 括起来的为可选参数，其作用是指定抛出的异常名称，以及异常信息的相关描述。如果可选参数全部省略，则 raise 会把当前错误原样抛出；如果仅省略 <code>(reason)</code>，则在抛出异常时，将不附带任何的异常描述信息。</p>
<p>也就是说，raise 语句有如下三种常用的用法：</p>
<ul>
<li><code>raise</code>：单独一个 raise。该语句引发当前上下文中捕获的异常（比如在 except 块中），或默认引发 RuntimeError 异常。</li>
<li><code>raise 异常类名称</code>：raise 后带一个异常类名称，表示引发执行类型的异常。</li>
<li><code>raise 异常类名称(描述信息)</code>：在引发指定类型的异常的同时，附带异常的描述信息。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    a = <span class="built_in">input</span>(<span class="string">&quot;输入一个数：&quot;</span>)</span><br><span class="line">    <span class="comment"># 判断用户输入的是否为数字</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> a.isdigit():</span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">&quot;a 必须是数字&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> ValueError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="comment"># repr函数，返回对象的规范字符串表示</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;引发异常：&quot;</span>, <span class="built_in">repr</span>(e))</span><br></pre></td></tr></table></figure>

<p>输入<code>a</code>，结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入一个数：a</span><br><span class="line">引发异常： ValueError(<span class="string">&#x27;a 必须是数字&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>可以看到，当用户输入的不是数字时，程序会进入 <code>if</code> 判断语句，并执行 <code>raise</code> 引发 <code>ValueError</code> 异常。但由于其位于 try 块中，因为 <code>raise</code> 抛出的异常会被 <code>try</code> 捕获，并由 <code>except</code> 块进行处理。</p>
<p>因此，虽然程序中使用了 <code>raise</code> 语句引发异常，但程序的执行是正常的，手动抛出的异常并不会导致程序崩溃。</p>
<h1 id="3-自定义异常"><a href="#3-自定义异常" class="headerlink" title="3 自定义异常"></a>3 自定义异常</h1><p>通过创建一个新的异常类，程序可以命名它们自己的异常。异常应该是典型的继承自<font color="red">Exception</font>类，通过直接或间接的方式。</p>
<h2 id="3-1-手动抛出异常"><a href="#3-1-手动抛出异常" class="headerlink" title="3.1 手动抛出异常"></a>3.1 手动抛出异常</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.用户自定义异常类型，继承自Exception类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TooLongException</span>(<span class="title class_ inherited__">Exception</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, le</span>):</span><br><span class="line">        self.le = le</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;姓名长度是<span class="subst">&#123;self.le&#125;</span>，超过长度了&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.手动抛出用户自定义类型异常</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">nameTest</span>():</span><br><span class="line">    name = <span class="built_in">input</span>(<span class="string">&quot;enter your name:&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(name) &gt; <span class="number">4</span>:</span><br><span class="line">        <span class="keyword">raise</span> TooLongException(<span class="built_in">len</span>(name))  <span class="comment"># 抛出异常很简单，使用raise即可,但是没有处理，即捕捉</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用函数，执行</span></span><br><span class="line">nameTest()</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">enter your name:t43rtfdvcx</span><br><span class="line">姓名长度是<span class="number">10</span>，超过长度了</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;D:\PycharmProject\error.py&quot;</span>, line <span class="number">74</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    nameTest()</span><br><span class="line">  File <span class="string">&quot;D:\PycharmProject\error.py&quot;</span>, line <span class="number">68</span>, <span class="keyword">in</span> nameTest</span><br><span class="line">    <span class="keyword">raise</span> TooLongException(<span class="built_in">len</span>(name))  <span class="comment"># 抛出异常很简单，使用raise即可,但是没有处理，即捕捉</span></span><br><span class="line">__main__.TooLongException: &lt;exception <span class="built_in">str</span>() failed&gt;</span><br></pre></td></tr></table></figure>

<h2 id="3-2-捕捉用户手动抛出的异常"><a href="#3-2-捕捉用户手动抛出的异常" class="headerlink" title="3.2 捕捉用户手动抛出的异常"></a>3.2 捕捉用户手动抛出的异常</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.用户自定义异常类型，继承自Exception类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TooLongException</span>(<span class="title class_ inherited__">Exception</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, le</span>):</span><br><span class="line">        self.le = le</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;姓名长度是<span class="subst">&#123;self.le&#125;</span>，超过长度了&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.捕捉用户手动抛出的异常，跟捕捉系统异常方式一样</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">nameTest</span>():</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        name = <span class="built_in">input</span>(<span class="string">&quot;enter your name:&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(name) &gt; <span class="number">4</span>:</span><br><span class="line">            <span class="keyword">raise</span> TooLongException(<span class="built_in">len</span>(name))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(name)</span><br><span class="line">    <span class="keyword">except</span> TooLongException <span class="keyword">as</span> e_result:  <span class="comment"># 这里异常类型是用户自定义的</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;捕捉到异常了&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;打印异常信息：&quot;</span>, e_result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用函数，执行</span></span><br><span class="line">nameTest()</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">enter your name:rytgfd2q345</span><br><span class="line">捕捉到异常了</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;D:\PycharmProject\error.py&quot;</span>, line <span class="number">93</span>, <span class="keyword">in</span> nameTest</span><br><span class="line">    <span class="keyword">raise</span> TooLongException(<span class="built_in">len</span>(name))</span><br><span class="line">__main__.TooLongException: &lt;exception <span class="built_in">str</span>() failed&gt;</span><br><span class="line"></span><br><span class="line">During handling of the above exception, another exception occurred:</span><br><span class="line"></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;D:\PycharmProject\error.py&quot;</span>, line <span class="number">102</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    nameTest()</span><br><span class="line">  File <span class="string">&quot;D:\PycharmProject\error.py&quot;</span>, line <span class="number">98</span>, <span class="keyword">in</span> nameTest</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;打印异常信息：&quot;</span>, e_result)</span><br><span class="line">TypeError: __str__ returned non-string (<span class="built_in">type</span> NoneType)</span><br><span class="line">打印异常信息： 姓名长度是<span class="number">11</span>，超过长度了</span><br><span class="line">姓名长度是<span class="number">11</span>，超过长度了</span><br><span class="line"></span><br><span class="line">进程已结束,退出代码<span class="number">1</span></span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/04/14-10-Python-%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="杨艺琳">
      <meta itemprop="description" content="我就是这条街最靓的仔">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨艺琳的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/04/14-10-Python-%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-03-04 11:10:10" itemprop="dateCreated datePublished" datetime="2022-03-04T11:10:10+08:00">2022-03-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-03-22 15:29:20" itemprop="dateModified" datetime="2022-03-22T15:29:20+08:00">2022-03-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%B5%8B%E8%AF%95%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">测试学习</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="1-项目目录结构"><a href="#1-项目目录结构" class="headerlink" title="1 项目目录结构"></a>1 项目目录结构</h1><h2 id="python的程序结构："><a href="#python的程序结构：" class="headerlink" title="python的程序结构："></a>python的程序结构：</h2><img src="/2022/03/04/14-10-Python-%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/image-20220304134433802.png" alt="image-20220304134433802" style="zoom: 50%;">

<h2 id="组成"><a href="#组成" class="headerlink" title="组成"></a>组成</h2><ul>
<li><code>package</code>包</li>
<li><code>modele</code>模块</li>
<li><code>function</code>方法</li>
</ul>
<h1 id="2-模块定义"><a href="#2-模块定义" class="headerlink" title="2 模块定义"></a>2 模块定义</h1><h2 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h2><ul>
<li>包含<code>Python</code>定义和语句的文件</li>
<li><code>.py</code>文件</li>
<li>作为脚本运行</li>
</ul>
<h2 id="模块分类"><a href="#模块分类" class="headerlink" title="模块分类"></a>模块分类</h2><ul>
<li>系统内置模块</li>
<li>第三方的开源模块</li>
<li>自定义模块</li>
</ul>
<h2 id="如何使用模块"><a href="#如何使用模块" class="headerlink" title="如何使用模块"></a>如何使用模块</h2><ul>
<li><h3 id="系统内置模块"><a href="#系统内置模块" class="headerlink" title="系统内置模块"></a>系统内置模块</h3><ul>
<li><p>Python安装好之后自带的一些非常有用的模块（sys, os, time, json 模块等）</p>
  <img src="/2022/03/04/14-10-Python-%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/image-20220304135423493.png" alt="image-20220304135423493" style="zoom:50%;">

  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="built_in">print</span>(sys.path)</span><br></pre></td></tr></table></figure>

<p>  结果：</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&#x27;D:\\PycharmProject&#x27;</span>, <span class="string">&#x27;D:\\PycharmProject&#x27;</span>, <span class="string">&#x27;C:\\Program Files\\Python310\\python310.zip&#x27;</span>, <span class="string">&#x27;C:\\Program Files\\Python310\\DLLs&#x27;</span>, <span class="string">&#x27;C:\\Program Files\\Python310\\lib&#x27;</span>, <span class="string">&#x27;C:\\Program Files\\Python310&#x27;</span>, <span class="string">&#x27;C:\\Users\\yilin.yang\\AppData\\Roaming\\Python\\Python310\\site-packages&#x27;</span>, <span class="string">&#x27;C:\\Program Files\\Python310\\lib\\site-packages&#x27;</span>]</span><br></pre></td></tr></table></figure>
</li>
<li><h3 id="第三方开源模块"><a href="#第三方开源模块" class="headerlink" title="第三方开源模块"></a>第三方开源模块</h3><ul>
<li><p>是通过包管理工具<code>pip</code>完成的</p>
<ul>
<li>需要通过 <code>pip install 模块名</code> 安装</li>
</ul>
</li>
<li><p>也通过可以Python解释器找到一些第三方库</p>
<p>  <img src="/2022/03/04/14-10-Python-%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/image-20220304140151603.png" alt="image-20220304140151603"></p>
</li>
</ul>
</li>
<li><h3 id="自定义模块"><a href="#自定义模块" class="headerlink" title="自定义模块"></a>自定义模块</h3><ul>
<li>自定义模块是自己写的模块，对某段逻辑或某些函数进行封装后供其他函<br>  数调用。</li>
</ul>
<p>  比如先定义一个模块<code>baidu.py</code>，输入代码：</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">search</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;这是一个搜索方法&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>  然后在另一个模块<code>demo.py</code>导入，注意导入时的选择：</p>
  <img src="/2022/03/04/14-10-Python-%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/image-20220304141004887.png" alt="image-20220304141004887" style="zoom:50%;">

  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> baidu <span class="keyword">import</span> search</span><br><span class="line">search()</span><br></pre></td></tr></table></figure>

<p>  或者写：</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> baidu</span><br><span class="line">baidu.search()</span><br></pre></td></tr></table></figure>

<p>  一个是直接导入<code>baidu</code>模块的<code>search</code>方法，另一个是只导入<code>baidu</code>模块，在模块内调用<code>search</code>方法。</p>
<blockquote>
<p>如果要导入一个模块的很多类或者方法，可以写 <code>from 模块名 import *</code></p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h1 id="3-文件引用"><a href="#3-文件引用" class="headerlink" title="3 文件引用"></a>3 文件引用</h1><h2 id="模块导入"><a href="#模块导入" class="headerlink" title="模块导入"></a>模块导入</h2><ul>
<li><code>import 模块名</code></li>
<li><code>from &lt;模块名&gt; import &lt;方法 | 变量 | 类&gt;</code></li>
<li><code>from &lt; 模块名 &gt; import*</code></li>
</ul>
<blockquote>
<p>注意：</p>
<ul>
<li>同一个模块写多次只被导入一次</li>
<li><code>import</code>应该放在代码的顶端</li>
</ul>
</blockquote>
<h2 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h2><ul>
<li><code>dir()</code> 找出当前模块定义的对象</li>
<li><code>dir(sys)</code>找出参数模块定义的对象</li>
</ul>
<h2 id="搜索路径"><a href="#搜索路径" class="headerlink" title="搜索路径"></a><strong>搜索路径</strong></h2><p><code>print(sys.path)</code> ，记得先导入<code>sys</code>模块</p>
<ul>
<li>Python解析器对模块位置的搜索顺序是<ul>
<li>包含输入脚本的目录（如果未指定文件，则为当前目录）</li>
<li>PYTHONPATH（目录名称列表，语法与shell变量相同PATH）</li>
<li>安装的默认路径</li>
</ul>
</li>
</ul>
<h2 id="使用模块的总结"><a href="#使用模块的总结" class="headerlink" title="使用模块的总结"></a>使用模块的总结</h2><ul>
<li>代码的可维护性</li>
<li>提升编码效率</li>
<li>函数名可重复（起名避免与系统重复）</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/03/14-9-%E7%B1%BB%E5%9E%8B%E6%B3%A8%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="杨艺琳">
      <meta itemprop="description" content="我就是这条街最靓的仔">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨艺琳的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/03/14-9-%E7%B1%BB%E5%9E%8B%E6%B3%A8%E8%A7%A3/" class="post-title-link" itemprop="url">14.9 类型注解</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-03-03 15:43:51" itemprop="dateCreated datePublished" datetime="2022-03-03T15:43:51+08:00">2022-03-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-03-04 11:08:34" itemprop="dateModified" datetime="2022-03-04T11:08:34+08:00">2022-03-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%B5%8B%E8%AF%95%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">测试学习</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="1-类型提示"><a href="#1-类型提示" class="headerlink" title="1 类型提示"></a>1 类型提示</h1><p>python类型支持提示：<a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3/library/typing.html">https://docs.python.org/zh-cn/3/library/typing.html</a></p>
<p>例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义一个函数，参数name的类型是字符串string，函数返回结果类型也是string</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">greeting</span>(<span class="params">name: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    <span class="comment"># name的类型是str所以name可以调用字符串的方法split(),分割后返回字符串列表</span></span><br><span class="line">    <span class="built_in">print</span>(name.split(<span class="string">&#x27;,&#x27;</span>))</span><br><span class="line">    <span class="comment"># 取分割后第三个元素加上&#x27;Hello&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Hello&#x27;</span> + name.split(<span class="string">&#x27;,&#x27;</span>)[<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(greeting(<span class="string">&#x27; python, java, C++&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&#x27; python&#x27;</span>, <span class="string">&#x27; java&#x27;</span>, <span class="string">&#x27; C++&#x27;</span>]</span><br><span class="line">Hello C++</span><br></pre></td></tr></table></figure>

<p><strong>类型提示的好处：</strong></p>
<ul>
<li>增强代码可读性</li>
<li>ide中代码提示</li>
<li>静态代码检查</li>
</ul>
<h1 id="2-IDE中代码提示功能"><a href="#2-IDE中代码提示功能" class="headerlink" title="2 IDE中代码提示功能"></a>2 IDE中代码提示功能</h1><h2 id="2-1-类型别名："><a href="#2-1-类型别名：" class="headerlink" title="2.1 类型别名："></a>2.1 类型别名：</h2><p>例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># List列表需要导入</span></span><br><span class="line">Vector = <span class="type">List</span>[<span class="built_in">float</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 函数scale有两个参数：float型的scalar和自己定义的类型Vector的参数vector(列表中每个元素都是float型的)，返回值也是类型Vector</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">scale</span>(<span class="params">scalar: <span class="built_in">float</span>, vector: Vector</span>) -&gt; Vector:</span><br><span class="line">    <span class="comment"># 返回scalar乘以vector中每个元素，返回一个列表</span></span><br><span class="line">    <span class="keyword">return</span> [scalar * num <span class="keyword">for</span> num <span class="keyword">in</span> vector]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(scale(<span class="number">1.2</span>, [<span class="number">2.3</span>, <span class="number">4.6</span>, <span class="number">5.2</span>]))</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">2.76</span>, <span class="number">5.52</span>, <span class="number">6.24</span>]</span><br></pre></td></tr></table></figure>

<p>如果输入参数错误，会有提示：</p>
<p><img src="/2022/03/03/14-9-%E7%B1%BB%E5%9E%8B%E6%B3%A8%E8%A7%A3/image-20220303202432014.png" alt="image-20220303202432014"></p>
<p>也可以设置提示类型为<code>ERROR</code></p>
<p><img src="/2022/03/03/14-9-%E7%B1%BB%E5%9E%8B%E6%B3%A8%E8%A7%A3/Snipaste_2022-03-03_19-37-39-16463095989361.png" alt="Snipaste_2022-03-03_19-37-39"></p>
<h2 id="2-2-自定义类型"><a href="#2-2-自定义类型" class="headerlink" title="2.2 自定义类型"></a>2.2 自定义类型</h2><p>例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>:</span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line">    age: <span class="built_in">int</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义一个函数，参数name类型为str，返回对象Student</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_stu</span>(<span class="params">name: <span class="built_in">str</span></span>) -&gt; Student:</span><br><span class="line">    <span class="keyword">return</span> Student()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">get_stu(<span class="string">&#x27;yyl&#x27;</span>).  ---&gt;有提示信息</span><br></pre></td></tr></table></figure>

<p>可以看到有提示信息：可以调用类的属性</p>
<img src="/2022/03/03/14-9-%E7%B1%BB%E5%9E%8B%E6%B3%A8%E8%A7%A3/image-20220303203132984.png" alt="image-20220303203132984">

<h1 id="3-静态代码检查功能"><a href="#3-静态代码检查功能" class="headerlink" title="3 静态代码检查功能"></a>3 静态代码检查功能</h1><p><strong>首先需要安装mypy：</strong></p>
<p>step1：查看环境变量</p>
<p><img src="/2022/03/03/14-9-%E7%B1%BB%E5%9E%8B%E6%B3%A8%E8%A7%A3/image-20220304103507180.png" alt="image-20220304103507180"></p>
<img src="/2022/03/03/14-9-%E7%B1%BB%E5%9E%8B%E6%B3%A8%E8%A7%A3/image-20220304103528056.png" alt="image-20220304103528056" style="zoom:80%;">

<p><img src="/2022/03/03/14-9-%E7%B1%BB%E5%9E%8B%E6%B3%A8%E8%A7%A3/image-20220304103602324.png" alt="image-20220304103602324"></p>
<p>step2：在<code>pycharm</code>终端输入<code>pip install mypy</code>进行安装</p>
<p>step3：<code>pip list</code>查看是否有<code>mypy</code></p>
<img src="/2022/03/03/14-9-%E7%B1%BB%E5%9E%8B%E6%B3%A8%E8%A7%A3/image-20220304104141145.png" alt="image-20220304104141145" style="zoom:80%;">

<p>输入代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span></span><br><span class="line"></span><br><span class="line">a: <span class="type">List</span>[<span class="built_in">int</span>] = []</span><br><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="string">&#x27;1&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p>step4：在终端输入：<code>python -m mypy 文件名.py</code>后，终端打印出错误提示信息：</p>
<p><img src="/2022/03/03/14-9-%E7%B1%BB%E5%9E%8B%E6%B3%A8%E8%A7%A3/image-20220304103025910.png" alt="image-20220304103025910"></p>
<p>说明在文件<code>leixzj.py</code>中第46行出现错误：列表项2（List[2]）的类型“str”不兼容；应为“int”</p>
<h1 id="4-补充：终端区别"><a href="#4-补充：终端区别" class="headerlink" title="4 补充：终端区别"></a>4 补充：终端区别</h1><p>cmd是和powershell都可以做命令行交互，批处理和powershell脚本功能也相当。</p>
<h2 id="4-1-PowerShell"><a href="#4-1-PowerShell" class="headerlink" title="4.1 PowerShell"></a>4.1 PowerShell</h2><p>powershell是执行linux的，gitbash也是，带$的也是。比如输入<code>ls</code>命令，在powershell可以执行。但是在cmd里不能，cmd是windows的终端，他没有ls命令。</p>
<img src="/2022/03/03/14-9-%E7%B1%BB%E5%9E%8B%E6%B3%A8%E8%A7%A3/image-20220304110741302.png" alt="image-20220304110741302" style="zoom: 50%;">

<h2 id="4-2-CMD"><a href="#4-2-CMD" class="headerlink" title="4.2 CMD"></a>4.2 CMD</h2><p>cmd是windows的终端。输入ls命令：</p>
<img src="/2022/03/03/14-9-%E7%B1%BB%E5%9E%8B%E6%B3%A8%E8%A7%A3/image-20220304110830286.png" alt="image-20220304110830286" style="zoom:50%;">

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="杨艺琳"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">杨艺琳</p>
  <div class="site-description" itemprop="description">我就是这条街最靓的仔</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">66</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">杨艺琳</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
